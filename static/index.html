<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyRenault API Tester</title>
    <style>
        body { font-family: sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; }
        input { width: 100%; padding: 8px; box-sizing: border-box; }
        button { padding: 10px 15px; background-color: #007bff; color: white; border: none; cursor: pointer; margin-right: 5px; margin-bottom: 5px; }
        button:hover { background-color: #0056b3; }
        .result { background-color: #f4f4f4; padding: 10px; border: 1px solid #ddd; margin-top: 20px; white-space: pre-wrap; min-height: 100px; }
        .actions { margin-top: 20px; }
        .actions h3 { margin-bottom: 10px; }
    </style>
</head>
<body>

    <h1>MyRenault API Tester</h1>

    <div class="form-group">
        <label for="email">Email</label>
        <input type="email" id="email" placeholder="Renault Account Email">
    </div>

    <div class="form-group">
        <label for="password">Password</label>
        <input type="password" id="password" placeholder="Renault Account Password">
    </div>

    <div class="form-group">
        <label for="vin">VIN</label>
        <input type="text" id="vin" placeholder="Vehicle Identification Number">
    </div>

    <div class="actions">
        <h3>Actions</h3>
        <button onclick="callApi('GET', 'battery')">Get Battery Status</button>
        <button onclick="callApi('GET', 'cockpit')">Get Cockpit</button>
        <button onclick="callApi('GET', 'location')">Get Location</button>
        <hr>
        <button onclick="callApi('POST', 'hvac-start')">HVAC Start (21Â°C)</button>
        <button onclick="callApi('POST', 'hvac-stop')">HVAC Stop</button>
        <button onclick="callApi('POST', 'charge-start')">Charge Start</button>
        <button onclick="callApi('POST', 'charge-stop')">Charge Stop</button>
        <button onclick="callApi('POST', 'lights')">Blink Lights</button>
        <button onclick="callApi('POST', 'honk')">Honk</button>
    </div>

    <h3>Result</h3>
    <div id="result" class="result">Waiting for action...</div>

    <script>
        async function callApi(method, endpoint) {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const vin = document.getElementById('vin').value;
            const resultDiv = document.getElementById('result');

            if (!email || !password || !vin) {
                alert("Please fill in Email, Password and VIN");
                return;
            }

            resultDiv.innerText = "Loading...";

            const headers = {
                'x-renault-email': email,
                'x-renault-password': password
            };

            const url = `/api/v1/vehicle/${vin}/${endpoint}`;

            try {
                const response = await fetch(url, {
                    method: method,
                    headers: headers
                });

                const data = await response.json();
                resultDiv.innerText = JSON.stringify(data, null, 2);
            } catch (error) {
                resultDiv.innerText = "Error: " + error.message;
            }
        }
    </script>
</body>
</html>
